# DBセキュリティグループ

**Database > EasyCache > コンソール利用ガイド > DBセキュリティグループ**

DBセキュリティグループは、キャッシュに属するノードの送受信トラフィックを一括で制御し、キャッシュとノードを保護する目的で使用します。ルールで指定したトラフィックは許可し、残りのトラフィックはブロックする「ポジティブセキュリティモデル(positive security model)」を使用します。キャッシュにDBセキュリティグループを関連付けない場合、全ての送受信トラフィックが許可されません。DBセキュリティグループを作成しても、キャッシュに適用しないとDBセキュリティグループのルールは適用されません。キャッシュには複数のDBセキュリティグループを適用できます。DBセキュリティグループの主な特徴は次のとおりです。

* DBセキュリティグループは「stateful」として動作するため、DBセキュリティルールで一度接続されたセッションは、反対方向のルールがなくても許可されます。
* 例えば、ノードに向かうTCP 3306の最初のパケットが「受信TCP PORT 3306」ルールに従って通過した場合、ノードからTCP 3306ポートを送信元として転送されるパケットはブロックされません。
* ただし、一定時間ルールに合致するパケットが入らずセッションがタイムアウトした場合、反対方向のパケットもブロックされます。
* DBセキュリティルールは、1つずつ追加するよりも範囲を指定する方が効率の面で有利です。DBセキュリティルールが増加すると、パフォーマンスが低下することがあります。
セッションの状態が一致しないトラフィックはブロックされることがあります。

DBセキュリティグループは、名前、説明、複数のDBセキュリティルールで構成され、DBセキュリティグループの名前には以下のような制約事項があります。

* DBセキュリティグループ名は、1～100文字の半角英数字と一部の記号(-, _, .)のみ使用でき、先頭の文字は半角英字のみ使用できます。

### DBセキュリティグループの適用
キャッシュを作成する際に適用するDBセキュリティグループを選択できます。キャッシュに属するノードは全て、選択したDBセキュリティグループの影響を受けます。キャッシュには複数のDBセキュリティグループを適用できます。適用された全てのDBセキュリティグループのルールがキャッシュに適用されます。キャッシュの修正画面で自由に変更できます。

## DBセキュリティルール
1つのDBセキュリティグループに複数のDBセキュリティルールを作成できます。キャッシュにDBセキュリティグループを設定すると、キャッシュに属する全てのノードに、そのDBセキュリティグループで作成された全てのDBセキュリティルールが適用されます。

| 項目 | 説明 |
| - | - |
| 方向 | 受信はキャッシュに属するノードに流入する方向を意味します。送信はキャッシュに属するノードから出ていく方向を意味します。 |
| ポート | ルールを適用するポートを設定します。ポート、ポート範囲、サービスポート、TLSサービスポートを選択できます。サービスポートまたはTLSポートを選択すると、DBセキュリティグループに接続したキャッシュ情報に合わせてポート値が指定されます。 |
| Ether | EtherType IPのバージョンを意味します。IPv4、IPv6を指定できます。 |
| リモート | IPアドレスの範囲を指定できます。ルールの方向が「送信」の場合は宛先がリモート、「受信」の場合は送信元がリモートになります。ルールの方向に応じて、トラフィックの送信元と宛先が設定されたIPアドレスまたは範囲であるかを比較します。 |
| 説明 | DBセキュリティグループのルールに関する説明を追加できます。 |

### DBセキュリティルールの変更
DBセキュリティルールの作成、修正、削除などの変更が発生すると、変更内容はDBセキュリティグループに接続されたキャッシュと、キャッシュに属するノードに順次適用されます。DBセキュリティグループに接続された全てのキャッシュ及びノードに適用されるまで、DBセキュリティグループに新規でDBセキュリティルールを追加したり、他のDBセキュリティルールを修正、削除したりすることはできません。