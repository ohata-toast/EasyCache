# 캐시

**Database > EasyCache > 콘솔 사용 가이드 > 캐시**

캐시는 가상 장비와 엔진(Valkey 및 구 Redis)을 설치한 노드들을 관리하는 개념으로, EasyCache 서비스 내 가장 큰 자원 단위입니다.
하나의 캐시는 여러 노드들로 구성되어 있으며 캐시에 속한 노드들은 캐시의 엔진 버전과 포트, 비밀번호, 파라미터 그룹, 보안 그룹 등의 정보를 공유합니다.

* 사용할 수 있는 포트 범위는 10000 \~ 12000 사이입니다.
* 현재 Valkey 엔진을 제공하며, Redis의 경우 이미 생성한 캐시만 지원합니다.
* 캐시는 32 바이트의 아이디를 자동으로 발급하여 제공합니다.
* 캐시의 이름은 사용자가 입력 및 수정할 수 있으며 아래의 제약 사항이 있습니다.
* 20자 이내의 문자와 숫자, 그리고 일부 기호(-, _ )만 사용할 수 있습니다.

제공하는 캐시의 타입은 아래와 같습니다.

| 타입 | 설명 |
| --- | --- |
| 단일 노드 캐시 | 하나의 마스터 노드만으로 이루어진 캐시 |
| 고가용성 캐시 | 하나의 마스터 노드와 하나 이상의 읽기 복제본 노드로 이루어진 캐시 |

## 노드

노드는 실제로 엔진(Valkey 및 구 Redis)과 엔진을 설치한 가상 장비를 지칭하는 기본 자원 단위입니다.
하나의 노드는 하나의 Valkey가 설치되며 기본적으로 캐시가 공유하는 정보를 따릅니다.
노드는 32 바이트의 아이디를 자동으로 발급하여 제공합니다.
노드의 이름은 캐시의 이름에 '-숫자/문자'를 추가하여 자동으로 작성되므로 변경할 수 없습니다.

제공하는 노드의 타입은 아래와 같습니다.

| 타입 | 설명 |
| --- | --- |
| 마스터 노드 | 읽기와 쓰기를 모두 제공하는 마스터 노드 |
| 읽기 복제본 노드(마스터 노드와 동일 리전인 경우) | 읽기만을 제공하는 읽기 전용 복제본 노드로 장애 조치 시 읽기 복제본 노드 중 하나가 마스터 노드로 변경됩니다. |
| 읽기 복제본 노드(마스터 노드와 다른 리전인 경우) | 읽기만을 제공하는 읽기 전용 복제본 노드이나, 장애 발생 시 장애 조치를 수행하지는 않습니다. |
| 고가용성 제어 노드 | 마스터 노드와 읽기 복제본 노드를 포함하여 고가용성을 제어하기 위한 개별 노드로, 읽기 복제본 노드를 하나 이상 추가할 경우 자동으로 생성됩니다. |

## 캐시 생성

아래 설정들을 사용하여 캐시를 생성할 수 있습니다.

### 가용성 영역

NHN Cloud는 물리 하드웨어 문제로 생기는 장애에 대비하기 위해 전체 시스템을 여러 개의 가용성 영역으로 나누어 두었습니다. 이 가용성 영역별로 저장 시스템, 네트워크 스위치, 상면, 전원 장치가 모두 별도로 구성돼 있습니다. 한 가용성 영역 내에서 생기는 장애는 다른 가용성 영역에 영향을 주지 않으므로 서비스 전체의 가용성이 높아집니다. EasyCache는 마스터 노드의 가용성 영역을 선택할 수 있으며 이 때 선택한 가용성 영역을 기준으로 읽기 복제본 노드들의 가용성 영역을 자동으로 할당하여 가용성을 높여줍니다. 여러 가용성 영역에 흩어져서 생성된 노드 간의 네트워크 통신 과정에서 발생하는 네트워크 사용 비용은 부과되지 않습니다.

!!! danger "주의"
    이미 생성한 마스터 노드의 가용성 영역은 변경할 수 없습니다.

### 엔진 버전

아래에 명시된 버전을 사용할 수 있습니다.

| 버전 | 비고 |
| --- | --- |
| **Valkey 8** |  |
| 8.0.2 |  |
| **Redis 7** | 신규 캐시 지원 종료 |
| 7.2.6 |  |
| 7.2.4 |  |
| 7.0.7 |  |
| **Redis 6** | 신규 캐시 지원 종료 |
| 6.2.3 |  |
| **Redis 5** | 신규 캐시 지원 종료 |
| 5.0.8 |  |
| **Redis 3** | 신규 캐시 지원 종료 |
| 3.2.12 |  |

!!! tip "알아두기"
    신규 생성하는 캐시에는 Redis를 더 이상 제공하지 않으며, 이미 Redis를 사용 중인 캐시에 대해서만 서비스를 제공합니다.

### 인스턴스 타입

인스턴스는 타입에 따라 서로 다른 CPU 코어 수와 메모리 용량을 가지고 있습니다.
인스턴스 생성 시 데이터베이스 워크로드에 따라 알맞은 인스턴스 타입을 선택해야 합니다.

| 타입 | 설명 |
| --- | --- |
| m2 | CPU와 메모리를 균형 있게 설정한 타입입니다. |
| c2 | CPU의 성능을 높게 설정한 인스턴스 타입입니다. |
| r2 | 다른 자원에 비해 메모리의 사용량이 많은 경우 사용할 수 있습니다. |
| x1 | 고사양의 CPU와 메모리를 지원하는 타입입니다. 높은 성능이 필요한 서비스나 애플리케이션에 사용합니다. |

!!! danger "주의"
    이미 생성한 캐시 및 노드의 인스턴스 타입은 변경할 수 없습니다. 현재 공식 기능으로 제공하고 있지 않으며, 필요시 고객 센터로 문의하세요.

### Max Memory(MB)

Valkey가 사용할 최대 메모리 용량을 지정하여 동기화나 백업 실행 시 메모리 부족을 예방할 수 있습니다.
필요할 때 캐시 수정 기능을 통해 메모리의 용량을 유연하게 확보할 수 있습니다.

### 비밀번호 사용

비밀번호 사용을 선택할 경우 자동으로 문자열을 생성하여 비밀번호를 지정합니다.
캐시 생성 완료 후 캐시 기본 정보 또는 노드 기본 정보에서 확인할 수 있습니다.

### 네트워크

캐시에 속한 노드에 연결할 VPC 서브넷을 선택해야 합니다. 동일한 서브넷에 연결된 Compute 서비스의 인스턴스 간에는 별도의 플로팅 IP 없이 통신할 수 있으며, 네트워크 트래픽에 대한 비용이 청구되지 않습니다. 노드는 기본적으로 모든 네트워크 접근을 차단하므로 접속을 원하는 경우 DB 보안 그룹을 적용해야 합니다.

!!! danger "주의"
    이미 생성한 캐시와 노드의 서브넷은 변경할 수 없습니다.

### 플로팅 IP

외부에서 노드에 접근하려면 플로팅 IP를 마스터 노드에 연결해야 합니다. Internet Gateway가 연결된 서브넷을 연결할 경우에만 플로팅 IP를 생성할 수 있습니다. 플로팅 IP는 사용과 동시에 과금되며, 이와 별개로 플로팅 IP를 통한 인터넷 방향의 트래픽이 발생할 경우 별도 과금합니다.
플로팅 IP를 사용할 경우 플로팅 IP를 위한 플로팅 IP 도메인이 같이 생성되어 캐시 기본 정보 및 마스터 노드의 기본 정보에서 확인할 수 있습니다.

### 파라미터 그룹

파라미터 그룹은 캐시에 속한 노드들의 Valkey에 관한 파라미터의 집합입니다. 캐시 생성 시 반드시 하나의 파라미터 그룹을 선택해야 합니다. 파라미터 그룹은 생성 이후에도 자유롭게 변경이 가능합니다. 파라미터 그룹에 대한 자세한 설명은 **@파라미터 그룹** 항목을 참고합니다.

### DB 보안 그룹

DB 보안 그룹은 외부 침입에 대비해 접속을 제한하기 위해서 사용합니다. 송수신 트래픽에 대해서 특정 포트 범위 또는 지정한 포트에 대해서 접근을 허용할 수 있습니다.
캐시에 한번에 여러 개의 DB 보안 그룹을 적용할 수 있으며, DB 보안 그룹에 대한 자세한 설명은 **@DB 보안 그룹** 항목을 참고합니다.

### TLS 인증

NHN Cloud의 **@Certificate Manager** 서비스에 저장된 인증서 중 하나를 선택해 TLS 인증서로 통신할 수 있습니다.

* **TLS 서비스 포트**: TLS 인증서를 사용한 접속용 포트입니다. 10000 이상, 12000 이하의 숫자로 서비스 포트와 다르게 설정해야 합니다.
* **TLS 서비스 포트만 사용**: TLS 서비스 포트만 사용하여 접속하도록 설정할 수 있습니다. 이 기능을 활성화할 경우 일반 서비스 포트를 사용해 접속할 수 없습니다.
* **인증서 선택**: Certificate Manager 서비스에 저장된 TLS 인증서 중 하나를 선택할 수 있습니다. Certificate Manager 서비스의 Appkey를 입력해야 합니다.
* Valkey는 공개 키, 비밀 키 및 CA 공개 키를 모두 필요로 합니다. 따라서 사용할 인증서에는 해당 키가 모두 포함되어야 하며, 해당 키를 생성하는 방법은 [Certificate Manager > 문제 해결 가이드](https://docs.nhncloud.com/ko/Management/Certificate%20Manager/ko/troubleshooting-guide/)를 참조하세요.

!!! danger "주의"
    복제 그룹 생성 시점에 TLS 인증서 사용 여부를 결정하면 이후에 변경할 수 없습니다.

### 백업

캐시의 Valkey를 주기적으로 백업하도록 설정하거나, 콘솔을 통해 원하는 시기에 백업을 생성할 수 있습니다. 백업은 마스터에서 수행되며, 수행되는 동안 성능 저하가 발생할 수 있습니다. 서비스에 영향을 주지 않기 위해 서비스의 부하가 적은 시간에 백업하는 것을 권장합니다. 백업 파일은 내부 백업 스토리지에 저장되며, 백업 용량에 따라 과금됩니다. 예상치 못한 장애에 대비하기 위해서 주기적으로 백업을 수행하도록 설정하는 것을 권장합니다. 백업에 대한 자세한 설명은 **@백업** 항목을 참고합니다.

### 기본 알림

캐시 생성 시 기본 알림을 설정할 수 있습니다. 기본 알림을 설정하면 {캐시 이름}-default라는 이름으로 새로운 알림 그룹이 생성되며 아래 알림 항목들이 자동으로 설정됩니다. 기본 알림으로 생성된 알림 그룹은 자유롭게 수정, 삭제할 수 있습니다. 알림 그룹에 대한 자세한 설명은 **@알림 그룹** 항목을 참고합니다.

기본 알림 그룹의 감시 설정 항목은 아래와 같습니다.

| 항목 | 비교 방법 | 임계값 | 지속 시간 |
| --- | ----- | --- | ----- |
| CPU 사용률 | > | 80% | 10분 |
| 메모리 사용량 | >= | 80% | 10분 |
| 연결된 클라이언트 수 | > | 9000 | 1분 |
| 블록된 클라이언트 수 | > | 1 | 10분 |
| 삭제된 키 개수 | > | 1 | 10분 |

### 삭제 보호

삭제 보호를 활성화하면 실수로 캐시가 삭제되지 않도록 보호할 수 있습니다.

## 캐시 및 노드 목록

콘솔에서 생성한 캐시를 확인할 수 있습니다. 캐시 단위로 캐시에 속한 노드를 리스트로 볼 수 있습니다.
[[캐시 리스트 이미지]]

➊: 버튼을 클릭하여 캐시에 속한 노드 리스트를 접거나 펼칠 수 있습니다.
➋: 가장 최근 수집된 모니터링 지표를 보여줍니다. 노드 리스트가 접혀 있을 땐 마스터 노드의 모니터링 지표를 캐시에 표시합니다.
➌: 현재 상태를 볼 수 있습니다.
➍: 진행 중인 작업이 있으면 스피너가 나타납니다.
➎: 검색 조건을 변경할 수 있습니다.

캐시 및 노드의 상태는 아래와 같은 값들로 구성되며, 사용자의 행위와 현재 상태에 따라 변경됩니다.

| 상태 | 설명 |
| --- | --- |
| REGISTERD | 생성 이전 |
| STABLE | 사용 가능 |
| FAILED\_TO\_CREATE | 생성 실패 |
| FAILED\_TO\_CONNECT | 연결 실패 |
| REPLICATION\_STOP | 복제 중단 |
| WARNING | 상태 이상 |
| DISABLE | 이용 불가 |
| PLANNED\_MIGRATION\_FAILED | 마이그레이션 실패 |
| SHUTDOWN | 중지됨 |

## 캐시 및 노드 상세

캐시 및 노드를 선택하면 상세 정보를 볼 수 있습니다.

[[캐시 기본 정보 이미지]]

➊: 접속 정보의 도메인을 클릭하면 IP 정보를 포함한 도메인의 자세한 정보를 확인할 수 있는 팝업 창이 나타납니다.
➋: DB 보안 그룹을 클릭하면 DB 보안 규칙을 확인할 수 있는 팝업 창이 나타납니다.
➌: 파라미터 그룹을 클릭하면 파라미터를 확인할 수 있는 화면으로 이동합니다.
➍: 마우스로 드래그 앤 드롭하여 상세 정보 패널의 높이를 조절할 수 있습니다.
➎: 상세 정보 패널을 미리 지정한 높이로 조정할 수 있습니다.

### 접속 정보

캐시 생성 시 접속 도메인을 발급합니다. 접속 도메인은 사용자 VPC 서브넷에 속한 IP 주소를 가리킵니다. 고가용성 캐시의 경우 장애 조치가 되어 읽기 복제본 중 하나가 새로운 마스터로 변경되더라도 접속 도메인은 변경되지 않습니다. 따라서 특별한 이유가 없으면 응용 프로그램의 접속 정보는 반드시 접속 도메인을 이용해야 합니다.

플로팅 IP를 사용한 경우 플로팅 IP 도메인을 추가로 발급합니다. 플로팅 IP 도메인은 플로팅 IP의 주소를 가리킵니다. 장애 조치가 되어 새로운 마스터로 교체되더라도 여전히 같은 플로팅 IP와 도메인을 이용해 새로운 마스터에 접근할 수 있습니다. 플로팅 IP 도메인은 외부에서 접근이 가능하므로 DB 보안 그룹의 규칙을 적절히 설정하여 캐시를 보호해야 합니다.

읽기 복제본 노드가 있다면 캐시 수정을 통해 읽기 전용 도메인을 설정할 수 있습니다. 읽기 전용 도메인을 사용할 경우 읽기 전용 도메인에 같은 캐시 및 같은 리전에 속한 읽기 복제본 노드들의 VPC 서브넷에 속한 IP 주소를 가리킵니다. 장애 조치가 되어 읽기 복제본 중 하나가 새로운 마스터로 변경되었다면 읽기 전용 도메인이 가리키는 IP 정보도 새롭게 갱신됩니다.

[[이벤트 이미지]]

### 이벤트(캐시)

선택한 캐시가 동작한 이벤트들이 시간 순서에 맞게 표시되며 원하는 기간을 지정하여 볼 수 있습니다.

[[백업 이미지]]

### 백업

선택한 캐시가 생성한 백업 리스트가 표시되며, **백업 생성**을 클릭해 백업을 생성할 수 있습니다.

[[노드 기본 정보 이미지]]

### 도메인

캐시는 모든 도메인 정보를 보여주고 있으나, 노드 기본 정보에서는 노드 종류별로 보여주는 도메인 정보가 다르므로 아래 설명을 참조합니다.

| 노드 종류 | 보여주는 도메인 정보 |
| ----- | ----------- |
| 마스터 노드 | 접속 도메인, 플로팅 IP 도메인 |
| 읽기 복제본 노드 | 읽기 전용 도메인 |
| 고가용성 제어 노드 | 없음 |

### 운영체제 버전

선택한 노드가 동작 중인 운영체제 버전을 보여줍니다.

[[모니터링 이미지]]

### 모니터링

선택한 노드의 각종 모니터링 지표를 보여줍니다.

[[이벤트 이미지]]

### 이벤트(노드)

선택한 노드가 동작한 이벤트들이 시간 순서에 맞게 표시되며 원하는 기간을 지정하여 볼 수 있습니다.

[[로그 이미지]]

### 로그

노드의 **로그** 탭에서는 Valkey의 로그를 원하는 기간을 지정하여 볼 수 있습니다. **새 탭으로 보기**를 클릭하면 새로운 탭에서 넓은 화면으로 로그를 확인할 수 있습니다.

[[사용자 이미지]]

### 사용자

노드의 사용자 탭에서는 Valkey에 사용자를 생성, 조회, 수정, 삭제할 수 있습니다.

➊: **생성**을 클릭하면 원하는 사용자의 정보를 입력할 수 있는 팝업 창이 나타납니다.
➋: 해당 사용자의 활성화 여부를 선택할 수 있습니다.
➌: Valkey가 지원하는 ACL 표현식을 통해 사용자에게 권한을 부여할 수 있습니다.
➍: 설정 파일의 **저장**을 클릭하면, 현재 Valkey 메모리에 저장되어 있는 사용자 정보가 설정 파일에 기록되어 재시작 후에도 사용자 설정이 유지됩니다.

!!! danger "주의"
    * 사용자 설정은 노드별로 설정되는 정보이므로 같은 캐시에 속한 다른 노드에 전파되지 않습니다. 따라서 노드별로 사용자 설정을 다르게 한 경우 장애 조치가 정상적으로 진행되지 않을 수 있으므로 주의해야 합니다.
    * 노드에 생성한 사용자 정보는 설정 파일에 저장하기 전에는 캐시 재시작 등의 이유로 유실될 수 있으므로 주의해야 합니다.

## 캐시 수정

[[캐시 수정 아이콘 이미지]]
콘솔 화면에서 원하는 캐시의 체크 박스를 선택한 뒤 **수정**을 클릭해 선택한 캐시의 다양한 항목을 손쉽게 변경할 수 있습니다. 변경 요청한 항목을 순차적으로 캐시에 적용합니다. 적용 과정에서 재시작이 필요할 경우 모든 변경을 적용한 뒤 캐시를 재시작합니다. 변경 불가능한 항목과 재시작이 필요한 항목은 다음과 같습니다.

| 항목 | 변경 가능 여부 | 재시작 필요 여부 | 설명 |
| --- | -------- | --------- | --- |
| 가용성 영역 | 아니오 |  |  |
| 엔진 버전 | 예 | 예 |  |
| Max Memory | 예 | 아니오 |  |
| 인스턴스 타입 | 아니오 |  |  |
| 캐시 이름 | 예 | 아니오 |  |
| 캐시 타입 | 예 | 아니오 | 캐시 수정 기능이 아닌 노드 추가 삭제 기능으로 따로 제공 |
| 설명 | 예 | 아니오 |  |
| 비밀번호 사용 | 아니오 |  |  |
| 서비스 포트 | 아니오 |  |  |
| 마스터 노드 다운 판정 시간 | 예 | 아니오 |  |
| 네트워크(VPC 서브넷) | 아니오 |  |  |
| 플로팅 IP 설정 | 예 | 아니오 |  |
| 읽기 전용 도메인 | 예 | 아니오 |  |
| 파라미터 그룹 | 예 | 경우에 따라 다름 | 변경한 파라미터에 따라 재시작 여부 결정 |
| DB 보안 그룹 | 예 | 아니오 |  |
| TLS 인증서 사용 | 아니오 |  |  |
| TLS 서비스 포트 | 아니오 |  |  |
| TLS 서비스 포트만 사용 | 아니오 |  |  |
| TLS 인증서 선택 | 예 | 아니오 |  |
| 백업 설정 | 예 | 아니오 |  |
| 기본 알림 | 예 | 아니오 |  |
| 삭제 보호 | 예 | 아니오 |  |

### 엔진 버전 수정

현재 캐시가 사용 중인 엔진 버전에서 더 높은 엔진 버전으로 수정하여 업그레이드를 진행할 수 있습니다.
엔진 버전 업그레이드는 서비스 중지 또는 순단이 발생하기 때문에 작업에 주의가 필요합니다.
캐시에 속한 읽기 복제본 노드 및 고가용성 제어 노드부터 엔진 버전 업그레이드가 진행되며, 노드들의 버전 업그레이드가 모두 진행되면 마스터 변경이 일어난 뒤 읽기 복제본 노드로 변한 구 마스터 노드의 엔진 버전을 업그레이드하므로 최종적으로 마스터가 교체됩니다.
만약 캐시에 속한 노드가 마스터 노드 하나뿐이라면 바로 마스터 노드의 엔진 버전 업그레이드를 수행하며 이때 서비스 중지가 발생합니다.

!!! danger "주의"
    * 마스터 노드와 같은 리전에 읽기 복제본 노드가 존재할 경우 최종적으로는 마스터가 변경되므로 주의합니다.

!!! tip "알아두기"
    * Redis 7.0.7 미만 버전들은 7.0.7 버전으로 한 번 업그레이드한 뒤에 다음 버전으로 업그레이드가 가능합니다.
    * Redis에서 Valkey로의 업그레이드는 현재 제공하지 않으나 추후 제공할 예정입니다.

## 노드 수정

[[노드 수정 아이콘 이미지]]
콘솔 화면에서 원하는 노드의 체크 박스를 선택한 뒤 **수정**을 클릭해 선택한 노드의 일부 항목을 변경할 수 있습니다.

| 항목 | 변경 가능 여부 | 재시작 필요 여부 | 설명 |
| --- | -------- | --------- | --- |
| 노드 이름 | 아니오 |  |  |
| 노드 타입 | 아니오 |  |  |
| 가용성 영역 | 아니오 |  |  |
| 엔진 버전 | 아니오 |  | 노드 수정 화면이 아닌 캐시 수정 화면에서 변경할 수 있으며 캐시에 속한 노드들에 순차적으로 반영됩니다. |
| 인스턴스 타입 | 아니오 |  | 현재는 지원하지 않습니다. (추후 지원 예정) |
| 운영체제 버전 | 예 | 예 | 가장 최신 버전으로만 업데이트 가능합니다. |

### 운영체제 버전 수정

노드의 운영체제 버전 업그레이드를 지원합니다. 운영체제 업그레이드를 통해 보안 취약점을 해결하거나 운영체제의 EOL에 대응할 수 있습니다.
운영체제 버전 업그레이드는 경우에 따라 서비스 중지가 발생하기 때문에 작업에 주의가 필요합니다.
마스터 노드의 경우 읽기 복제본이 있다면 진행할 수 없으며, 읽기 복제본 노드와 고가용성 제어 노드부터 운영체제 버전 업그레이드를 먼저 진행한 뒤 마스터 변경 기능을 통해 기존 마스터를 읽기 복제본으로 변경한 다음 운영체제 버전 업그레이드를 진행해야 합니다.
만약, 마스터 노드 외 다른 노드가 없다면 마스터 노드의 운영체제 버전 업그레이드를 진행할 수 있으며, 서비스 중지가 반드시 발생합니다.

## 데이터 가져오기

[[데이터 가져오기 버튼 이미지]]

동일한 리전의 **@Object Storage**에서 데이터를 가져와 캐시에 적용할 수 있습니다.
사용자 테넌트 아이디, API 비밀번호를 입력한 뒤, {containerName}/{path or fileName} 형식의 데이터 파일 경로를 입력하고 **데이터 가져오기**를 누르면 작업이 시작됩니다.

!!! danger "주의"
    * 데이터 가져오기 중에는 노드를 사용할 수 없으며, 기존 데이터는 삭제되므로 데이터 가져오기 전 수동 백업 생성을 권장합니다.
    * 엔진 버전과 호환되는 RDB 파일만 가져올 수 있습니다.

## 데이터 내보내기

[[데이터 내보내 버튼 이미지]]
내가 원하는 캐시의 데이터를 동일한 리전의 **@Object Storage**로 내보낼 수 있습니다.
사용자 테넌트 아이디, API 비밀번호를 입력한 뒤, 컨테이너 이름과 데이터 이름 Prefix\* 항목을 입력하고 **데이터 내보내기**를 클릭하면 작업이 시작됩니다.

!!! tip "알아두기"
    사용자가 입력한 경로의 Object Storage에 입력한 데이터 이름 prefix 값과 임의의 문자열이 합쳐진 RDB 파일이 생성됩니다.

## 노드 추가

[[노드 추가 아이콘 이미지]]
콘솔 화면에서 원하는 캐시의 체크 박스를 선택한 뒤 **읽기 복제본 노드 추가**를 클릭해 읽기 복제본 노드를 추가할 수 있습니다.
단일 노드 캐시의 경우 마스터 노드와 동일한 리전에 읽기 복제본 노드를 처음 추가하면 고가용성 제어 노드가 같이 생성됩니다.
읽기 복제본 노드는 마스터 노드와 동일한 리전에 최대 2개, 마스터 노드와 다른 리전 한곳에 1개까지 생성할 수 있습니다.
노드 추가가 완료되면 캐시의 종류가 고가용성 캐시로 변경되며, 마스터 노드에서 장애가 발생할 경우 마스터 노드와 동일한 리전에 읽기 복제본 노드가 있다면 장애 조치를 수행하여 마스터 노드가 교체됩니다.

!!! danger "주의"
    다른 리전에 생성한 읽기 복제본은 마스터 노드에 장애가 발생하더라도 장애 조치되지 않습니다.

## 복제 연결 제거 및 강제 복제 연결 제거

[[복제 연결 제거 아이콘 이미지]]
콘솔 화면에서 마스터와 다른 리전에 위치한 읽기 복제본 노드에 한하여 노드의 체크박스를 선택한 뒤 **복제 연결 제거** 또는 **강제 복제 연결 제거** 기능을 사용할 수 있습니다.
복제 연결 제거 기능을 사용할 경우, 원본 리전의 마스터로부터 복제 연결이 제거되어 새로운 마스터로 승격됩니다.

!!! tip "알아두기"
    * 강제 복제 연결 제거를 수행할 경우 강제로 복제 연결 작업을 수행하는 것이므로 원본 리전의 캐시 및 마스터 노드 구성 정보와 불일치가 발생할 수 있습니다. 따라서 원본 리전의 장애 상황과 같은 특수한 경우에만 사용할 것을 권장합니다.
    * 마스터와 같은 리전의 읽기 복제본은 복제 연결 제거 기능을 지원하지 않습니다. (추후 지원 예정)

## 노드 삭제

[[노드 삭제 아이콘 이미지]]
콘솔 화면에서 원하는 고가용성 캐시에 속한 노드의 체크 박스를 선택한 뒤 **노드 삭제**를 클릭해 읽기 복제본 노드를 삭제할 수 있습니다.
마스터 노드와 고가용성 제어 노드는 지정해서 삭제할 수 없습니다.
선택한 읽기 복제본 노드가 삭제된 뒤 마스터 노드와 같은 리전에 더 이상 남은 읽기 복제본 노드가 존재하지 않는다면 고가용성 제어 노드도 같이 삭제합니다.

## 마스터 변경

[[캐시 마스터 변경 아이콘 이미지]]
콘솔 화면에서 원하는 고가용성 캐시의 체크 박스를 선택한 뒤 마스터 변경 기능을 통해 마스터를 변경할 수 있습니다.
기존 마스터 노드는 읽기 복제본으로 변경되면, 마스터 노드와 같은 리전에 위치한 읽기 복제본 노드 중 하나가 새로운 마스터로 변경됩니다.

## 캐시 중지

[[캐시 중지 아이콘 이미지]]
동작 중인 캐시 중 원하는 것을 선택하여 중지시킬 수 있습니다.
고가용성 캐시일 경우 캐시에 속한 모든 노드가 중지됩니다.

## 캐시 시작

[[캐시 시작 아이콘 이미지]]
중지된 캐시 중 원하는 것을 선택하여 다시 시작할 수 있습니다.
고가용성 캐시일 경우 캐시에 속한 모든 노드를 시작합니다.

## 캐시 재시작

[[캐시 시작 아이콘 이미지]]
콘솔 화면에서 캐시 중 원하는 것을 선택하여 다시 시작할 수 있습니다.
고가용성 캐시일 경우 캐시에 속한 모든 노드가 재시작합니다.

## 파라미터 그룹 변경 사항 적용

[[파라미터 그룹 변경 사항 적용 이미지]]
이미 캐시가 사용 중인 파라미터 그룹을 **파라미터 그룹** 탭에서 수정할 경우 해당 파라미터 그룹을 사용 중인 캐시와 캐시에 속한 노드에 바로 적용되지는 않으며, 대신 콘솔 화면의 캐시 목록에 **파라미터** 버튼이 나타나고, 체크 박스를 선택할 경우 **파라미터 그룹 변경 사항** 항목이 활성화됩니다.

!!! danger "주의"
    파라미터 그룹 변경 사항 적용의 경우 해당 파라미터 그룹의 변경된 파라미터 항목에 따라 재시작이 발생할 수 있으므로 주의해야 합니다.

## 고가용 재설정

[[고가용성 재설정 버튼 이미지]]
캐시의 고가용성 상태가 비정상일 경우 캐시의 상태가 **상태 이상**으로 표시되며, 캐시 목록에 **고가용성 재설정** 버튼이 노출되어 사용할 수 있습니다.
고가용성 재설정을 수행할 경우, 고가용성과 관련된 설정을 다시 작성하거나 고가용성 노드를 재생성하는 작업이 수행됩니다.

## 마이그레이션

[[마이그레이션 버튼 노출 이미지]]
캐시에 속한 노드들 중에 가상 장비의 플랜드 마이그레이션이 필요한 경우, 해당 노드에 마이그레이션 버튼이 노출됩니다.
마이그레이션 기능은 경우에 따라 서비스 중지가 발생하기 때문에 작업에 주의가 필요합니다.

!!! tip "알아두기"
    마스터 노드의 경우 읽기 복제본이 있다면 버튼은 노출되지만 비활성화되어 진행할 수 없습니다. 읽기 복제본 노드와 고가용성 제어 노드부터 마이그레이션을 먼저 진행하고, 마스터 변경 기능을 이용해 기존 마스터를 읽기 복제본으로 변경한 뒤 마이그레이션을 진행해야 합니다.

## 캐시 삭제

더 이상 사용하지 않는 캐시는 언제든 삭제할 수 있습니다. 캐시를 삭제할 경우 캐시에 속한 모든 노드가 함께 삭제됩니다. 삭제된 캐시 및 노드들은 복구할 수 없으므로 중요한 캐시는 삭제 보호 설정을 활성화하는 것을 권장합니다.

## 백업

장애 상황에 대비하여 캐시의 데이터를 복구할 수 있도록 미리 준비할 수 있습니다. 필요할 때마다 콘솔에서 백업을 수행하거나, 주기적으로 백업이 수행되도록 설정할 수 있습니다. 자세한 사항은 **@백업** 항목을 참고합니다.

## 복원

백업을 이용하여 데이터를 복원할 수 있습니다. 복원 시, 이미 존재하는 캐시에 복원할지 새로운 캐시에 복원할지 선택할 수 있습니다. 자세한 사항은 **@백업** 내 **@복원** 항목을 참고합니다.

## 고가용성 캐시

EasyCache의 캐시는 마스터 노드와 동일한 리전에 읽기 복제본 노드를 추가하면 자동으로 고가용성 제어 노드가 생성되며 장애 발생 시 장애 조치를 자동으로 수행합니다.

!!! danger "주의"
    고가용성 캐시를 구성하는 노드들이 사용자 설정을 공유하지 않으므로 하나의 노드에서 사용자 설정을 변경하더라도 같은 캐시에 속한 다른 노드에 전파되지 않습니다. 따라서 노드별로 사용자 설정을 다르게 했다면 장애 조치가 정상적으로 진행되지 않을 수 있으므로 주의해야 합니다.

### 장애 감지

[[노드 추가 팝업 화면 이미지]]
마스터와 동일한 리전에 있는 모든 노드들은 마스터 노드를 감지하고 있으며, 읽기 복제본 노드를 추가할 때 입력한 마스터 노드 다운 판정 시간을 기준으로 통신 실패 여부를 결정하여 장애 조치를 수행합니다. 따라서 캐시 사용에 적합한 마스터 노드 다운 판정 시간을 설정하는 것이 중요합니다.

### 자동 장애 조치

장애 감지를 통하여 장애 여부를 탐지했다면 노드 간의 합의에 의해 마스터와 같은 리전에 존재하는 읽기 복제본 노드 중 하나를 신규 마스터로 선출하고 기존의 마스터는 읽기 복제본으로 변경합니다.
접속을 위한 접속 도메인 및 읽기 전용 도메인 정보가 새로운 장애 조치가 이루어진 노드를 기준으로 갱신되며, 플로팅 IP 도메인은 변경되지 않으나 플로팅 IP 도메인이 가리키는 플로팅 IP는 새로운 마스터를 가리키도록 자동으로 변경됩니다.

!!! tip "알아두기"
    장애 조치는 마스터 노드와 같은 리전에 속한 노드들을 대상으로 수행하는 기능이므로, 다른 리전에만 읽기 복제본 노드를 추가할 경우는 자동 장애 조치를 지원하지 않습니다.

### 강제 복제 연결 제거

[[강제 복제 연결 제거 아이콘 이미지]]
다른 리전에 추가한 읽기 복제본 노드의 경우 마스터 장애 시 자동 장애 조치 대상이 아닙니다. 그러나 장애 발생 시 시급히 다른 리전에 있는 읽기 복제본 노드를 사용해야 할 경우 **강제 복제 연결 제거** 기능을 사용하여 다른 리전에 있는 읽기 복제본 노드를 마스터 노드로 승격할 수 있습니다.
**강제 복제 연결 기능 제거**를 수행할 경우 다른 리전에 기존 노드와 구분되는 개별 캐시가 새로 생성되고, 기존의 읽기 복제본 노드가 마스터 노드로 승격되며 새로운 접속 도메인이 노출됩니다.

!!! tip "알아두기"
    * 강제 복제 연결 제거를 수행할 경우 강제로 복제 연결 작업을 수행하는 것이므로 원본 리전의 캐시 및 마스터 노드 구성 정보와 불일치가 발생할 수 있습니다. 따라서 원본 리전의 장애 상황과 같은 특수한 경우에만 사용하고, 단순히 다른 리전의 읽기 복제본을 새로운 캐시로 분리하는 것이 목적이라면 일반 복제 연결 제거 기능을 사용하는 것을 권장합니다.
    * 마스터와 같은 리전의 읽기 복제본은 복제 연결 제거 기능을 지원하지 않습니다. (추후 지원 예정)